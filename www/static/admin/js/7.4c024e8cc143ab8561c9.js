webpackJsonp([7],{"+KWZ":function(t,e,a){"use strict";e.c=function(t){return Object(n.a)({url:"api/content",method:"get",params:t})},e.a=function(t,e){return Object(n.a)({url:e?"api/content/"+e:"api/content",method:"post",data:t})},e.b=function(t){var e=t.id;return Object(n.a)({url:"api/content/"+e,method:"delete"})};var n=a("vLgD")},"8HjA":function(t,e){},l30r:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("4YfN"),r=a.n(n),o=a("+KWZ"),i={name:"articles",data:function(){return{tableList:[],params:{key:"",type:"default"},total:0,pageSize:10,pageIndex:1}},created:function(){this.fetchData()},components:{},filters:{},methods:{changePage:function(t){this.pageIndex=t,this.fetchData()},fetchData:function(){var t=this,e=r()({},this.params,{pageSize:this.pageSize,page:this.pageIndex});Object(o.c)(e).then(function(e){var a=e.data;console.log("data",a),t.total=a.count,t.tableList=a.data,t.total=a.data.length}).catch(function(e){t.$message.error({message:"文章查询失败"})})},onEdit:function(t){this.$router.push({path:"/articles/publish",query:{id:t}})},onDelete:function(t,e){var a=this;Object(o.b)({id:t}).then(function(t){0==t.errno?(a.$message.success({message:"删除成功！"}),a.tableList.splice(e,1)):a.$message.error({message:"删除失败！"})})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"articles-container"},[a("el-header",{staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{offset:0,span:4}},[a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.params.key,callback:function(e){t.$set(t.params,"key",e)},expression:"params.key"}})],1),t._v(" "),a("el-col",{attrs:{offset:5,span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push("/articles/publish")}}},[t._v("发布文章")])],1)],1)],1),t._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"文章名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category",label:"分类",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.category.slug))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"view",label:"阅读量",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"发布时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(1e3*e.row.create_time).toLocaleString()))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.onEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.onDelete(e.row.id,e.row.index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.changePage}})],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(i,l,!1,function(t){a("8HjA")},null,null);e.default=s.exports}});
//# sourceMappingURL=7.4c024e8cc143ab8561c9.js.map